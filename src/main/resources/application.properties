spring.application.name=griya
spring.config.import=optional:file:.env[.properties]


# Database Configuration (PostgreSQL)
# Use env vars provided by Kubernetes Deployment/ConfigMap/Secret
spring.datasource.url=${SPRING_DATASOURCE_URL}
spring.datasource.username=${SPRING_DATASOURCE_USERNAME}
spring.datasource.password=${SPRING_DATASOURCE_PASSWORD}
spring.datasource.driver-class-name=org.postgresql.Driver

# JPA/Hibernate Configuration
spring.jpa.hibernate.ddl-auto=${SPRING_JPA_HIBERNATE_DDL_AUTO:none}
spring.jpa.show-sql=${SPRING_JPA_SHOW_SQL:true}
spring.jpa.database-platform=org.hibernate.dialect.PostgreSQLDialect
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.jdbc.lob.non_contextual_creation=true
spring.jpa.properties.hibernate.connection.characterEncoding=utf8
spring.jpa.properties.hibernate.connection.CharSet=utf8
spring.jpa.properties.hibernate.connection.useUnicode=true

# Flyway Configuration
spring.flyway.locations=classpath:db/migration

# H2 Console (disabled - using PostgreSQL)
# spring.h2.console.enabled=true
# spring.h2.console.path=/h2-console

# JWT Configuration
# JWT Configuration (override via env in Kubernetes)
jwt.secret=${JWT_SECRET:mySecretKey123456789012345678901234567890}
jwt.expiration=${JWT_EXPIRATION:86400000}
jwt.access.expiration=${JWT_ACCESS_EXPIRATION:600000}

# Server Configuration

# Actuator Configuration for Kubernetes probes
server.port=18080
management.endpoints.web.exposure.include=health,info
management.endpoint.health.probes.enabled=true
management.endpoint.health.show-details=never
management.health.livenessstate.enabled=true
management.health.readinessstate.enabled=true

# Security Configuration
security.cors.allowed-origins=http://localhost:3000,http://localhost:18080,https://admin.satuatap.my.id,https://satuatap.my.id
security.cors.allowed-methods=GET,POST,PUT,DELETE,OPTIONS
security.cors.allowed-headers=*

# Logging Configuration
logging.level.com.kelompoksatu.griya=DEBUG
logging.level.org.springframework.security=DEBUG
logging.level.org.hibernate.SQL=DEBUG
logging.level.org.hibernate.type.descriptor.sql.BasicBinder=TRACE

# Spring Configuration
spring.main.allow-circular-references=true

#Flyway Configuration
spring.flyway.enabled=true
spring.flyway.baseline-on-migrate=true
#spring.flyway.locations=classpath:db/migration

#Email Configuration
spring.mail.host=smtp.zoho.com
spring.mail.port=587
spring.mail.username=adityarizky.ramadhan@clips.id
spring.mail.password=${MAIL_PASSWORD:jfr7auU97Arh}
spring.mail.properties.mail.smtp.auth=true
spring.mail.properties.mail.smtp.starttls.enable=true
spring.mail.properties.mail.smtp.starttls.required=true
spring.mail.properties.mail.smtp.ssl.trust=smtp.zoho.com
spring.mail.properties.mail.debug=true


# send email verification link (handle in Front-end)
app.mail.verificationBaseUrl=${EMAIL_VERIFICATION_BASE_URL}/auth/verify?token=
app.mail.resetPasswordUrl=${EMAIL_RESET_PASSWORD_URL}/auth/reset-password?token=

app.mail.verification.forgotPasswordExpiredTime=5
app.mail.verification.emailExpiredTime=10

# Swagger/OpenAPI Configuration
springdoc.api-docs.path=/v3/api-docs
springdoc.swagger-ui.path=/swagger-ui.html
springdoc.swagger-ui.enabled=true
springdoc.swagger-ui.try-it-out-enabled=true
springdoc.swagger-ui.operations-sorter=method
springdoc.swagger-ui.tags-sorter=alpha
springdoc.swagger-ui.filter=true
springdoc.swagger-ui.display-request-duration=true
springdoc.swagger-ui.display-operation-id=true
springdoc.swagger-ui.default-models-expand-depth=1
springdoc.swagger-ui.default-model-expand-depth=1

app.server.baseUrl=${APP_BASE_URL:http://localhost:18080}

# File Upload Configuration
spring.servlet.multipart.enabled=true
spring.servlet.multipart.max-file-size=${MAX_FILE_SIZE:10MB}
spring.servlet.multipart.max-request-size=${MAX_REQUEST_SIZE:50MB}
spring.servlet.multipart.file-size-threshold=2KB

# File Storage Configuration
app.file.upload-dir=${FILE_UPLOAD_DIR:./uploads}
app.file.max-size=${FILE_MAX_SIZE:10485760}
app.file.allowed-types=image/jpeg,image/png,image/gif,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document
app.file.base-url=${FILE_BASE_URL:http://localhost:18080/files}

idcloudhost.s3.access-key=${IDCLOUDHOST_S3_ACCESS_KEY:HHNXIN643A0LD0F2GIFX}
idcloudhost.s3.secret-key=${IDCLOUDHOST_S3_SECRET_KEY:lsAlIOWj2HBdeCjOCM987l3z7W73pEj9APUJ1R1O}
idcloudhost.s3.bucket-name=${IDCLOUDHOST_S3_BUCKET_NAME:griya-app}
idcloudhost.s3.region=${IDCLOUDHOST_S3_REGION:id-jkt-1}
idcloudhost.s3.endpoint=${IDCLOUDHOST_S3_ENDPOINT:https://is3.cloudhost.id}


# Telegram Bot Configuration
telegram.bot.token=${BOT_TOKEN:6657339648:AAFG9Jb8MEEhKdUApXtJx1Ux33L8kXRhsLs}
telegram.bot.chat-id=${TELEGRAM_CHAT_ID:1286446058}
telegram.bot.api-url=https://api.telegram.org/bot
telegram.bot.enabled=${TELEGRAM_BOT_ENABLED:true}

# OTP Configuration
otp.length=6
otp.ttl.minutes=5
otp.max.attempts=3
otp.rate.limit.window.minutes=60
otp.rate.limit.max.requests=5

# WhatsApp API Configuration
whatsapp.api.url=http://localhost:8080/api/send-message
whatsapp.api.key=test123
# Header name for API key (change if your WA handler expects a different header)
whatsapp.api.header-name=${WHATSAPP_API_HEADER_NAME:X-API-Key}

# Redis Configuration
spring.data.redis.host=${REDIS_HOST:localhost}
spring.data.redis.port=${REDIS_PORT:6379}
spring.data.redis.password=${REDIS_PASSWORD:}
spring.data.redis.database=0
spring.data.redis.timeout=2000ms
spring.data.redis.jedis.pool.max-active=8
spring.data.redis.jedis.pool.max-idle=8
spring.data.redis.jedis.pool.min-idle=0

logging.level.root=INFO
logging.level.org.springframework.boot.autoconfigure.security=DEBUG
logging.level.org.springframework.web=DEBUG

